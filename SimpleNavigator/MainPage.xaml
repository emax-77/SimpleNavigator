<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SimpleNavigator.MainPage">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15" BackgroundColor="Black">

            <!-- GPS + Compass -->
            <Border BackgroundColor="#1a1a1a" Stroke="#333" StrokeShape="RoundRectangle 10" Padding="15" Margin="0,10">
                <VerticalStackLayout Spacing="10">
                    <!-- GPS Position -->
                    <Label x:Name="GpsLabel" 
                           Text="GPS: retrieving GPS data..." 
                           FontSize="16" 
                           HorizontalTextAlignment="Center" 
                           TextColor="White" />

                    <!-- Compass Status -->
                    <Label x:Name="CompassStatusLabel" 
                           Text="Compass: OFF" 
                           FontSize="16" 
                           TextColor="Red" 
                           HorizontalTextAlignment="Center" />
                </VerticalStackLayout>
            </Border>
                 
            <!-- Navigation -->
            <Border BackgroundColor="#1a1a1a" Stroke="#333" StrokeShape="RoundRectangle 10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="🧭 Navigation" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           HorizontalTextAlignment="Center" />

                    <!-- Navigate Button -->
                    <Button x:Name="NavigateButton" 
                            Text="🧭 Start Navigation" 
                            Clicked="OnShowDirectionClicked" 
                            BackgroundColor="Orange" 
                            TextColor="White" 
                            FontSize="18"/>

                    <!-- Arrow picture -->
                    <Image x:Name="ArrowImage" 
                           Source="my_bw_arrow.png" 
                           HeightRequest="120" 
                           WidthRequest="120" 
                           Rotation="0" 
                           HorizontalOptions="Center" 
                           BackgroundColor="Transparent" />
                </VerticalStackLayout>
            </Border>

            <!-- Target Information -->
            <Border BackgroundColor="#1a1a1a" Stroke="#333" StrokeShape="RoundRectangle 10" Padding="15">
                <VerticalStackLayout Spacing="8">
                    <Label Text="🎯 Target Information" 
               FontSize="18" 
               FontAttributes="Bold" 
               TextColor="White" 
               HorizontalTextAlignment="Center" />

                    <!-- Target position Label -->
                    <Label x:Name="TargetPositionLabel" 
               Text="Target GPS position:" 
               FontSize="14" 
               FontAttributes="Bold" 
               HorizontalTextAlignment="Center" 
               TextColor="LightGray"/>

                    <Label x:Name="TargetLocationLabel" 
               Text="-" 
               FontSize="16" 
               HorizontalTextAlignment="Center" 
               TextColor="White"/>

                    <!-- Distance Display -->
                    <Label x:Name="DistanceLabel" 
               Text="Distance: N/A" 
               FontSize="20" 
               FontAttributes="Bold" 
               HorizontalTextAlignment="Center" 
               TextColor="White"/>
                </VerticalStackLayout>
            </Border>

            <!-- Location Management -->
            <Border BackgroundColor="#1a1a1a" Stroke="#333" StrokeShape="RoundRectangle 10" Padding="15" Margin="0,10">
                <VerticalStackLayout Spacing="10">
                    <Label Text="📍 Location Management" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           HorizontalTextAlignment="Center" />

                    <!-- Save Current Location Button -->
                    <Button x:Name="SaveLocationButton" 
                            Text="💾 Save Current Location" 
                            Clicked="OnSaveLocationClicked" 
                            BackgroundColor="Green" 
                            TextColor="White" />

                    <!-- Add Manual Location Button -->
                    <Button x:Name="AddManualLocationButton" 
                            Text="📝 Add Manual Coordinates" 
                            Clicked="OnAddManualLocationClicked" 
                            BackgroundColor="Purple" 
                            TextColor="White" />

                    <!-- Saved Locations Picker -->
                    <Label Text="Select saved location:" 
                           FontSize="14" 
                           TextColor="White" />

                    <Picker x:Name="SavedLocationsPicker" 
                            Title="Choose location..." 
                            BackgroundColor="White" 
                            TextColor="Black" 
                            SelectedIndexChanged="OnLocationSelected" 
                            IsVisible="False" 
                            ItemDisplayBinding="{Binding DisplayText}" />

                    <!-- Edit Location Button -->
                    <Button x:Name="EditLocationButton" 
                            Text="✏️ Edit Selected Location" 
                            Clicked="OnEditLocationClicked" 
                            BackgroundColor="#FF8C00" 
                            TextColor="White" 
                            IsVisible="False" />
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
